{% extends "base.html" %}

{% block title %}Forum - SPK{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="bi bi-chat-dots"></i> Forum Komunikasi Anggota</h2>
    <a href="{{ url_for('forum.create_post') }}" class="btn btn-primary">
        <i class="bi bi-plus-circle"></i> Buat Post Baru
    </a>
</div>

<div class="card">
    <div class="card-body">
        {% if posts %}
            {% for post in posts %}
            <div class="border-bottom pb-3 mb-3">
                <h5>
                    <a href="{{ url_for('forum.view_post', post_id=post.id) }}" class="text-decoration-none">
                        {{ post.title }}
                    </a>
                </h5>
                <p class="text-muted mb-2">
                    <i class="bi bi-person"></i> {{ post.author.username }} | 
                    <i class="bi bi-clock"></i> {{ post.created_at.strftime('%d/%m/%Y %H:%M') }} |
                    <i class="bi bi-chat"></i> {{ post.replies.count() }} balasan
                </p>
                <p class="mb-0">{{ post.content[:200] }}{% if post.content|length > 200 %}...{% endif %}</p>
            </div>
            {% endfor %}
        {% else %}
            <div class="text-center py-5">
                <i class="bi bi-chat-dots" style="font-size: 4rem; color: #ccc;"></i>
                <p class="text-muted mt-3">Belum ada post. Jadilah yang pertama membuat post!</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
